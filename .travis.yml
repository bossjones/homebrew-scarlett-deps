---
# env:
#   global:
#   - LC_CTYPE=en_US.UTF-8
#   - LANG=en_US.UTF-8
#   - LANGUAGE=en_US.UTF-8

# FIXME: Enable this
# matrix:
#   fast_finish: true
#   allow_failures:
#     - osx_image: xcode8


# Reference:
#   https://docs.travis-ci.com/user/reference/osx/
#   https://docs.travis-ci.com/user/languages/objective-c/
#   https://docs.travis-ci.com/user/build-stages/
#   https://github.com/ReactiveCocoa/ReactiveSwift/blob/master/.travis.yml


# --------------------------
matrix:
  include:
  # ORIGINAL WORKING VERSION
  - name: "High Sierra (10.13) and xcode9.3"
    os: osx
    sudo: required
    language: objective-c
    # 10.13 (see https://docs.travis-ci.com/user/osx-ci-environment/#OS-X-Version)
    osx_image: xcode9.3
    xcode_sdk: macosx10.13
    # env: MY_RUBY_VERSION=""

  - name: "OS X El Capitan (10.11) and xcode8"
    os: osx
    sudo: required
    language: objective-c
    osx_image: xcode8
    xcode_sdk: macosx10.11
    env: MY_HOMEBREW_UPDATE="1"


  - name: "Sierra (10.12) and xcode8.3"
    os: osx
    sudo: required
    language: objective-c
    osx_image: xcode8.3
    xcode_sdk: macosx10.12


  - name: "Sierra (10.12) and xcode9"
    os: osx
    sudo: required
    language: objective-c
    osx_image: xcode9
    xcode_sdk: macosx10.12
    env: MY_HOMEBREW_UPDATE="1"


  - name: "Sierra (10.12) and xcode9.1"
    os: osx
    sudo: required
    language: objective-c
    osx_image: xcode9.1
    xcode_sdk: macosx10.12


  - name: "Sierra (10.12) and xcode9.2"
    os: osx
    sudo: required
    language: objective-c
    osx_image: xcode9.2
    xcode_sdk: macosx10.12

  - name: "High Sierra (10.13) and xcode9.4"
    os: osx
    sudo: required
    language: objective-c
    osx_image: xcode9.4
    xcode_sdk: macosx10.13

# WORKING VERSION
# # SOURCE: https://github.com/geerlingguy/mac-dev-playbook/blob/df25444b3f08e1c5a2c7b941d0a49850514f9d98/.travis.yml
# os: osx
# sudo: required
# language: objective-c
# # 10.13 (see https://docs.travis-ci.com/user/osx-ci-environment/#OS-X-Version)
# osx_image: xcode9.3
# xcode_sdk: macosx10.13

# osx_image: xcode7.3	Xcode 7.3.1	7D1014	OS X 10.11	1.8.0_92-b14

before_install:
  - "if [ ! -z ${MY_HOMEBREW_UPDATE+x} ]; then brew update; fi"
  - travis_retry brew tap bossjones/scarlett-deps
  # - echo "xcodebuild -showsdks"; xcodebuild -showsdks
  # - echo "TRAVIS_XCODE_SDK"; env
  # - xcodebuild -showsdks | awk '/^$/{p=0};p; /OS X SDKs:/{p=1}'
  # - _SDKPARAM=`xcodebuild -showsdks | awk '/^$/{p=0};p; /OS X SDKs:/{p=1}' | tail -1 | cut -f3`; echo "_SDKPARAM - ${_SDKPARAM}"

script:
  - brew install --verbose --with-python --devel bossjones/scarlett-deps/cmu-sphinxbase; brew install --verbose --with-python bossjones/scarlett-deps/cmu-pocketsphinx
